# vue-router的使用

## 安装

在vue-cli3中， `vue add router`

## 起步

- 配置

```js
// router.js
import Vue from 'vue'
import Router from 'vue-router'
import Home from './views/Home.vue'

Vue.use(Router) // 引入Router插件

export default new Router({
  mode: 'history', // 模式：hash | history | abstract
  base: process.env.BASE_URL, // http://localhost:8080/cart
  routes: [
    {
      path: '/',
      name: 'home',
      component: Home
    },  
    {
      path: '/about',
      name: 'about',
      // 路由层级代码分割，生成分片(about.[hash].js)
      // 当路由访问时会懒加载 
      component: () => import(/* webpackChunkName: "about" */ './views/About.vue')
    }
  ]
})
```

- 指定路由器

```js
// main.js
new Vue({
  router,
  render: h => h(App)
}).$mount('#app')

```

- 路由视图

```vue
<router-view />
```

- 导航链接

```vue
<router-link to="/">Home</router-link>
<router-link to="/about">About</router-link>
```

>一些疑问点：
>
>1. 为什么Vue.use(Router)
>2. <router-view/>、<router-link to="/">Home</router-link>哪来的
>3. 它们的功能怎么实现的

- 路由嵌套

应用界面通常有多层嵌套的组件组合而成。同样的，URL中各段动态路径也按某种结构对应嵌套的各层组件。

~ 创建List.vue并移动商品列表部分内容

~ 配置路由，router.js

```js
{
  path: '/',
  name: 'home',
  component: Home,
  children: [{ path: '/list', name: 'list', component: List }]
},
```

~ 添加插座，Home.vue

```vue
<template>
  <div class="home">
    <h1>首页</h1>
    <router-view></router-view>
  </div>
</template>
```

## 动态路由

我们经常需要把某种模式匹配到的所有路由，全部映射到同一个路由

~ 创建 Detail.vue

```vue
<template>
  <div>
    {{$route.params.id}}
  </div>
</template>
```

~ 详情页路由配置，router.js

```js
{
  path: '/',
    component: Home,
      children: [
        { path: '/list', name: 'list', component: List },
        { path: '/detail/:id', component: Detail }
      ]
},
```

~ 跳转，List.vue

```vue
<ul>
  <li>
    列表项<router-link to="/detail/1">详情</router-link>
  </li>
</ul>
```

> 传递路由组件参数：
>
> ```js
> { path: '/detail/:id', component: Detail, props: true }
> ```
>
> 组件中以属性方式获取：
>
> ```js
> export default { props: ['id'] }
> ```
>
> 可以有效解耦，增加组件通用性